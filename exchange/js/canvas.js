let padding={top:40,bottom:40,left:60,right:20},days=["Կր","Եկ","Եք","Չր","Հգ","Ու","Շբ"];function getSmartYAxisTicks(t){let e=Math.min(...t),l=(Math.max(...t)-e||1)/4,i=Math.pow(10,Math.floor(Math.log10(l))),d=[3,10,50,100].find(t=>t*i>=l)*i,n=Math.floor(e/d)*d,o=[];for(let a=0;a<5;a++)o.push(n+a*d);return o}export function drawGraph(t,e){let l=e.map(t=>t.value),i=t.getContext("2d"),{width:d,height:n}=t,o=getSmartYAxisTicks(l),a=o[0],g=o[4],f=d-padding.left-padding.right,p=n-padding.top-padding.bottom-10;i.clearRect(0,0,d,n),i.strokeStyle="#ddd",i.lineWidth=1,i.fillStyle="#888",i.font="10px sans-serif",i.textAlign="right",i.textBaseline="middle";for(let r=0;r<o.length;r++){let $=o[r],h=o[r].toFixed(2),s=padding.top+p*(1-($-a)/(g-a));i.beginPath(),i.moveTo(padding.left,s),i.lineTo(d-padding.right,s),i.stroke(),i.fillText(h,padding.left-10,s)}let _=f/(l.length-1);i.beginPath(),l.forEach((t,e)=>{let l=padding.left+_*e,d=padding.top+p*(1-(t-a)/(g-a));0===e?i.moveTo(l,d):i.lineTo(l,d)}),i.strokeStyle="#0fb3ed",i.lineWidth=2,i.stroke(),l.forEach((t,l)=>{let d=padding.left+_*l,o=padding.top+p*(1-(t-a)/(g-a));i.beginPath(),i.arc(d,o,3,0,2*Math.PI),i.fillStyle="#e2f8f4",i.fill();let f=new Date(e[l].date).getDay();i.fillStyle="#888",i.textAlign="center",i.fillText(days[f],d,n-padding.bottom+15)})}